<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lock&Go</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{
margin:0;
font-family:-apple-system;
background:radial-gradient(circle at 20% 10%,#9333ea 0%,#1e1b4b 50%,#0a0f1f 100%);
color:white;
}

.screen{display:none;padding:20px;}
.active{display:block;}

.card{
background:rgba(255,255,255,.07);
padding:20px;
border-radius:20px;
margin-bottom:15px;
}

.button{
width:100%;
padding:14px;
border:none;
border-radius:15px;
margin-top:10px;
background:linear-gradient(135deg,#7c3aed,#6366f1);
color:white;
font-weight:600;
cursor:pointer;
}

.button.secondary{
background:rgba(255,255,255,.1);
}

.sos{
width:150px;
height:150px;
border-radius:50%;
background:radial-gradient(circle,#ff2d55,#7f1d1d);
display:flex;
align-items:center;
justify-content:center;
margin:30px auto;
font-size:22px;
cursor:pointer;
animation:pulse 2s infinite;
}

@keyframes pulse{
0%{box-shadow:0 0 20px rgba(255,0,80,.4)}
50%{box-shadow:0 0 70px rgba(255,0,80,1)}
100%{box-shadow:0 0 20px rgba(255,0,80,.4)}
}

.nav{
position:fixed;
bottom:0;
width:100%;
height:60px;
background:#140028;
display:flex;
justify-content:space-around;
align-items:center;
}

.nav button{
background:none;
border:none;
color:#c4b5fd;
font-size:14px;
cursor:pointer;
}

.nav button.active{color:white;}

.notification{
position:fixed;
top:20px;
left:50%;
transform:translateX(-50%);
background:#111827;
padding:12px 20px;
border-radius:12px;
opacity:0;
transition:.3s;
}

.notification.show{opacity:1;}
</style>
</head>

<body>

<div class="notification" id="notif"></div>

<!-- LOGIN -->
<div class="screen active" id="login">
<h2>Lock&Go</h2>
<div class="card">
<input id="nameInput" placeholder="Enter your name" style="width:100%;padding:10px;margin-bottom:10px;">
<button class="button" id="startBtn">Start</button>
</div>
</div>

<!-- HOME -->
<div class="screen" id="home">
<h2 id="greeting"></h2>

<div class="card">
<p>ðŸ”’ Status: <span id="status">Locked</span></p>
<p>ðŸ“¶ Bluetooth: <span id="bt">Connected</span></p>
<p>ðŸ”‹ Battery: <span id="battery">82</span>%</p>
<p>ðŸ’³ NFC Card: Active</p>

<button class="button" id="unlockFace">Unlock with FaceID</button>
<button class="button secondary" id="unlockCard">Unlock with Card</button>
<button class="button secondary" id="lockBtn">Lock Bike</button>
<button class="button secondary" id="mapBtn">Open Map</button>
<button class="button secondary" id="activityBtn">View Activity</button>
<button class="button secondary" id="alarmBtn">Toggle Alarm</button>
</div>

<div class="sos" id="sosBtn">SOS</div>
</div>

<!-- GPS -->
<div class="screen" id="gps">
<h3>Live GPS</h3>
<div id="map" style="height:300px;border-radius:20px;"></div>
</div>

<!-- ACTIVITY -->
<div class="screen" id="activity">
<h3>Activity Log</h3>
<div class="card" id="logBox"></div>
</div>

<div class="nav">
<button id="navHome">Home</button>
<button id="navGPS">GPS</button>
<button id="navActivity">Activity</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

let isLocked = true;
let alarmActive = false;
let battery = 82;

function showScreen(id){
document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

function notify(text){
const n=document.getElementById('notif');
n.innerText=text;
n.classList.add('show');
setTimeout(()=>n.classList.remove('show'),2500);
}

function addLog(text){
let log=document.createElement("p");
log.innerText=new Date().toLocaleTimeString()+" - "+text;
document.getElementById("logBox").prepend(log);
}

document.getElementById("startBtn").onclick=()=>{
let name=document.getElementById("nameInput").value;
if(name==="") name="User";
document.getElementById("greeting").innerText="Hello, "+name+" ðŸ‘‹";
showScreen("home");
};

document.getElementById("unlockFace").onclick=()=>{
if(!isLocked){ notify("Already unlocked"); return; }
notify("Scanning FaceID...");
setTimeout(()=>{
isLocked=false;
document.getElementById("status").innerText="Unlocked";
addLog("Unlocked with FaceID");
notify("Bike unlocked");
},1500);
};

document.getElementById("unlockCard").onclick=()=>{
if(!isLocked){ notify("Already unlocked"); return; }
isLocked=false;
document.getElementById("status").innerText="Unlocked";
addLog("Unlocked with NFC Card");
notify("Card accepted");
};

document.getElementById("lockBtn").onclick=()=>{
isLocked=true;
document.getElementById("status").innerText="Locked";
addLog("Bike locked");
notify("Bike locked");
};

document.getElementById("alarmBtn").onclick=()=>{
alarmActive=!alarmActive;
notify(alarmActive?"Alarm activated":"Alarm deactivated");
addLog("Alarm "+(alarmActive?"ON":"OFF"));
};

document.getElementById("mapBtn").onclick=()=>{
showScreen("gps");
};

document.getElementById("activityBtn").onclick=()=>{
showScreen("activity");
};

document.getElementById("sosBtn").onclick=()=>{
notify("ðŸš¨ Emergency sent!");
addLog("Emergency SOS triggered");
document.body.style.background="#7f1d1d";
setTimeout(()=>document.body.style.background="",1000);
};

document.getElementById("navHome").onclick=()=>showScreen("home");
document.getElementById("navGPS").onclick=()=>showScreen("gps");
document.getElementById("navActivity").onclick=()=>showScreen("activity");

/* MAP */
let map=L.map('map').setView([52.52,13.405],13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
L.marker([52.52,13.405]).addTo(map);

/* Battery drain simulation */
setInterval(()=>{
if(battery>0 && !isLocked){
battery--;
document.getElementById("battery").innerText=battery;
}
},5000);

</script>

</body>
</html>
